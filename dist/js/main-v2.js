import{dbRef,get,getAuth,app,GoogleAuthProvider,signInWithPopup}from"./firebase-config.js";function createProduct(e,t,o,n,a,r){let c=document.querySelector(".product-grid"),d=document.createElement("div");if(d.classList.add("product"),e&&(d.innerHTML+=`<div class="product-sale">${e}</div>`),d.innerHTML+=t?`<div class="product-image">\n            <img src="${t}" alt="">\n        </div>`:'<div class="product-image">\n            <img src="assets/img/icons/empty.png" alt="">\n        </div>',o&&(d.innerHTML+=`<div class="product-company">${o}</div>`),n&&(d.innerHTML+=`<div class="product-name">${n}</div>`),a){let e='<svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.99996 0L4.77994 4.37495L0 5.16906L3.40783 8.66706L2.6738 13.5328L7 11.3197L11.3262 13.5328L10.5922 8.66706L14 5.16906L9.22006 4.37495L6.99996 0Z" fill="#FFD166"/></svg>',t='<svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.99996 0L4.77994 4.37495L0 5.16906L3.40783 8.66706L2.6738 13.5328L7 11.3197L11.3262 13.5328L10.5922 8.66706L14 5.16906L9.22006 4.37495L6.99996 0Z" fill="#DFDEDC"/></svg>',o=document.createElement("div");o.classList.add("product-rate");for(let t=1;t<=a;t++)o.innerHTML+=`${e}`;if(a<5){let e=5-a;for(let n=1;n<=e;n++)o.innerHTML+=`${t}`}d.append(o);let n=document.createElement("div");n.classList.add("product-bottom"),d.append(n),r&&(n.innerHTML+=`<div class="product-price">${r}</div>`);let c=document.createElement("div");c.classList.add("product-add"),c.textContent="Add  +",n.append(c)}c.append(d)}var map=L.map("map").setView([50.44771846014896,30.492616380116534],13);L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:20,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(map);var marker=L.marker([50.44771846014896,30.492616380116534]).addTo(map);marker.bindPopup("<b>Our Office</b>").openPopup();const header=document.querySelector("header");window.addEventListener("scroll",(function(){window.scrollY>0?header.classList.add("active"):header.classList.remove("active")}));const menuBtn=document.querySelector("#mobile-menu"),menu=document.querySelector("header nav");menuBtn.addEventListener("click",(function(){this.classList.toggle("active"),menu.classList.toggle("open")}));const currentDate=document.querySelector("#current-data");currentDate.innerHTML=(new Date).getFullYear();const modalBtn=document.querySelector(".modal-auth-btn"),modalClose=document.querySelector(".modal-close"),modal=document.querySelector(".modal-auth");function getData(){get(dbRef).then((e=>{if(e.exists()){const t=e.val();for(let e in t)createProduct(t[e].sale,t[e].pic,t[e].company,t[e].name,t[e].rate,t[e].price)}else console.log("No data available")})).catch((e=>{console.error(e)}))}modalBtn.addEventListener("click",(function(){modal.classList.add("active")})),modalClose.addEventListener("click",(function(){modal.classList.remove("active")})),getData();const auth=getAuth(app),provider=new GoogleAuthProvider,authBtn=document.querySelector(".google-auth-button"),modalContent=document.querySelector(".modal-content");authBtn.addEventListener("click",(function(){signInWithPopup(auth,provider).then((e=>{const t=GoogleAuthProvider.credentialFromResult(e).accessToken,o=e.user;console.log("User Info: ",o),console.log("Access Token: ",t),modalContent.innerHTML=`<p>Welcome ${o.displayName}</p>`,setTimeout((()=>{modal.classList.remove("active")}),3e3)})).catch((e=>{e.code;const t=e.message;e.customData.email,GoogleAuthProvider.credentialFromError(e);console.error("Error: ",t)}))}));